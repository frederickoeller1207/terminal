<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>M√§usegruppe Admin</title>
  <style>
    body { font-family: sans-serif; padding: 1em; background: #f9f9f9; }
    h1 { font-size: 1.5em; }
    .block { margin-bottom: 2em; }
    input, button { margin: 0.3em 0; padding: 0.5em; }
    .item { background: #fff; border: 1px solid #ccc; margin: 0.3em 0; padding: 0.5em; }
  </style>
</head>
<body>
  <h1>M√§usegruppe Admin</h1>

  <div class="block">
    <h2>Neues Kind hinzuf√ºgen</h2>
    <input type="text" id="kindName" placeholder="Name">
    <button onclick="addKind()">Hinzuf√ºgen</button>
  </div>

  <div class="block">
    <h2>Neues Spielzeug hinzuf√ºgen</h2>
    <input type="text" id="spielzeugNr" placeholder="Nummer (z.‚ÄØB. 001)">
    <input type="text" id="spielzeugName" placeholder="Bezeichnung (z.‚ÄØB. Springseil)">
    <button onclick="addToy()">Hinzuf√ºgen</button>
  </div>

  <div class="block">
    <h2>Aktuelle Ausleihen</h2>
    <div id="ausleihen"></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, set, remove, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const firebaseConfig = {
      databaseURL: "https://gesamt-dae4e-default-rtdb.europe-west1.firebasedatabase.app"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Kind hinzuf√ºgen
    window.addKind = () => {
      const name = document.getElementById('kindName').value.trim();
      if (!name) return alert("Name eingeben!");
      set(ref(db, 'kinder/' + name), true);  // üëà Wichtig: Nur true
      document.getElementById('kindName').value = "";
    };

    // Spielzeug hinzuf√ºgen
    window.addToy = () => {
      const nr = document.getElementById('spielzeugNr').value.trim();
      const name = document.getElementById('spielzeugName').value.trim();
      if (!nr || !name) return alert("Beides eingeben!");
      set(ref(db, 'spielzeuge/' + nr), name);
      document.getElementById('spielzeugNr').value = "";
      document.getElementById('spielzeugName').value = "";
    };

    // R√ºckgabe-Funktion
    window.zurueckgeben = (name) => {
      remove(ref(db, "ausleihen/" + name));
    };

    // Ausleihen anzeigen
    const el = document.getElementById("ausleihen");
    const ausleihenRef = ref(db, "ausleihen");

    onValue(ausleihenRef, snapshot => {
      el.innerHTML = "";
      snapshot.forEach(child => {
        const name = child.key;
        const data = child.val();
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `<b>${name}</b> hat <i>${data.spielzeug} (${data.nummer})</i> ausgeliehen 
          <button onclick="zurueckgeben('${name}')">Zur√ºckgeben</button>`;
        el.appendChild(div);
      });
    });
  </script>
</body>
</html>